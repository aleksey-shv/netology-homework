# Домашнее задание к занятию "`«Базы данных, их типы»`" - `Шведов Алексей`

---

### Задание 1. СУБД

Кейс

Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Приведите ответ в свободной форме.

### Ответ:

1.1. Для бюджетирования проектов и формирования финансовых отчётов лучше всего использовать реляционные СУБД, такие как MySQL, PostgreSQL или Microsoft SQL Server. Они обеспечивают целостность данных и позволяют быстро выполнять запросы на агрегацию и аналитику данных. Для прогнозирования рисков можно использовать алгоритмы машинного обучения, для которых также подойдут реляционные СУБД.

1.1.* Для ускорения хеширования можно использовать API, такие как OpenSSL, Bcrypt или Scrypt.

1.2. Для лендингов и CRM лучше всего использовать NoSQL СУБД, такие как MongoDB или Cassandra. Они позволяют быстро работать с большими объёмами данных и гибко менять структуру данных при необходимости.

1.2.* Да, можно использовать одну СУБД, например, MongoDB или Cassandra. Для лендингов можно создать коллекцию с данными по лидам, а для CRM - отдельную коллекцию или таблицу с данными о клиентах и сделках. Для реализации можно использовать драйверы для языков программирования, такие как PyMongo или DataStax для Python.

1.3. Для отдела контроля качества можно использовать любую реляционную СУБД, так как эта задача не требует особенных возможностей, которые не могут быть реализованы в реляционных СУБД. Например, можно использовать MySQL или PostgreSQL.

1.3.* Да, можно использовать уже существующую реляционную СУБД, например, PostgreSQL или MySQL. Для этого нужно создать отдельную схему или базу данных, в которой будут созданы таблицы, соответствующие структуре данных для задачи отдела контроля качества.

1.4. Для задач логистики и распределения курьеров лучше использовать графовые СУБД. Они позволяют эффективно работать с данными, связанными с маршрутами и распределением ресурсов. Примерами таких СУБД могут служить Neo4j, OrientDB, ArangoDB.

1.4.* Для отдела закупок можно использовать ту же графовую СУБД, что и для логистики, и создать новую базу данных для хранения информации о закупках.

1.5.* В теории, все задачи можно решить, используя одну СУБД, но на практике может быть несколько СУБД, которые будут взаимодействовать друг с другом. Например, можно использовать графовую СУБД для задач по формированию маршрутов доставки, реляционную СУБД для бюджетирования проектов и CRM, и NoSQL СУБД для лендингов. Взаимодействие между СУБД можно реализовать с помощью API и протоколов передачи данных, таких как REST API или GraphQL.

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

Приведите ответ в свободной форме.

### Ответ:

2.1. Чтобы транзакция пополнения баланса счета телефона завершилась успешно, следует выполнить следующие шаги в базе данных:

1. Аутентификация пользователя: Пользователь должен быть аутентифицирован в системе, чтобы иметь возможность пополнить баланс своего счета. Для этого в базе данных необходимо проверить логин и пароль пользователя.

2. Проверка баланса: Система должна проверить, достаточно ли средств на балансе пользователя для проведения транзакции. Для этого в базе данных необходимо проверить текущий баланс пользователя.

3. Создание транзакции: При успешной аутентификации и проверке баланса создается новая транзакция пополнения баланса. Для этого в базе данных необходимо создать новую запись транзакции с указанием суммы пополнения, даты и времени транзакции, а также ID пользователя.

4. Блокировка средств: Для обеспечения целостности данных и избежания конфликтов, связанных с параллельным доступом к данным, необходимо заблокировать средства на балансе пользователя. Для этого в базе данных должна быть выполнена транзакция блокировки средств на балансе пользователя.

5. Обновление баланса: После блокировки средств система обновляет баланс пользователя в базе данных, добавляя сумму пополнения. Для этого в базе данных должна быть выполнена транзакция обновления баланса.

6. Подтверждение транзакции: После успешного обновления баланса система подтверждает транзакцию и разблокирует средства на балансе пользователя. Для этого в базе данных должна быть выполнена транзакция подтверждения транзакции и разблокировки средств на балансе пользователя.

Если все шаги завершены успешно, транзакция пополнения баланса счета телефона будет успешно завершена. В случае возникновения ошибок на любом из шагов, транзакция будет отклонена, и баланс пользователя не будет изменен.

2.1.* Если пополнение счета телефона происходит через автоплатеж, то база данных должна произвести следующие действия:

1. Получить информацию об автоплатеже: база данных должна проверить, что у пользователя установлен автоплатеж и что он настроен на пополнение счета телефона.

2. Обработать транзакцию: база данных должна обработать транзакцию пополнения счета телефона, сняв деньги с банковского счета пользователя и зачислив их на счет телефона.

3. Обновить информацию о счете: база данных должна обновить информацию о счете телефона, отражая новый баланс после пополнения. Это позволит пользователям узнать, сколько денег осталось на их счетах.

4. Сгенерировать отчет: база данных может создать отчет об автоплатеже, который может быть использован для аудита или бухгалтерской отчетности.

5. Уведомление: если была настроена система уведомлений, база данных должна отправить уведомление пользователю о том, что его счет был успешно пополнен.

6. Журналирование: база данных должна занести информацию об автоплатеже в журнал, чтобы можно было отследить историю изменений счета пользователя в будущем.

В целом, база данных должна обеспечить безопасность, точность и надежность при проведении автоплатежей, чтобы гарантировать, что средства будут правильно перечислены на счет телефона пользователя и не возникнут ошибки в процессе.

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

Приведите ответ в свободной форме.

### Ответ:

3.1. SQL и NoSQL - это две различные модели баз данных с разными подходами к хранению и управлению данными. Обе модели имеют свои преимущества и недостатки, в зависимости от целей и задач, которые они должны решать.

Вот пять преимуществ SQL-систем по отношению к NoSQL:

1. Структурированный подход к хранению данных: SQL-системы требуют определения схемы данных, что обеспечивает более жесткий контроль над тем, как данные хранятся и как они могут быть использованы. NoSQL системы не имеют схемы данных и могут хранить любые данные, что может привести к большей гибкости, но может также вызвать проблемы согласованности и целостности данных.

2. Поддержка транзакций: SQL-системы имеют встроенную поддержку транзакций, что позволяет гарантировать целостность данных при выполнении операций записи и чтения. NoSQL системы не всегда имеют такую поддержку, что может привести к проблемам согласованности данных.

3. Высокая производительность для запросов на чтение: SQL-системы часто используют индексы для оптимизации запросов на чтение, что позволяет выполнять их быстрее. NoSQL системы не всегда поддерживают индексы или используют их менее эффективно.

4. Широкая поддержка: SQL-системы имеют долгую историю и широкую поддержку в индустрии. Существует множество инструментов и библиотек для работы с SQL-системами, а также много опыта и знаний, которые можно использовать при разработке приложений. NoSQL системы не всегда имеют такую широкую поддержку.

5. Более простой язык запросов: SQL-запросы обычно более просты и понятны, чем запросы для NoSQL систем. Это может облегчить разработку приложений и ускорить время выполнения.

3.1.* Новая технология баз данных - NewSQL - комбинирует преимущества SQL- и NoSQL-систем, чтобы обеспечить более высокую производительность и гибкость. Преимущества NewSQL систем перед SQL и NoSQL:

Высокая производительность: NewSQL системы предлагают высокую производительность для запросов на чтение и запись, благодаря оптимизации процесса обработки данных.

Широкие возможности горизонтального масштабирования: NewSQL системы имеют возможность масштабироваться горизонтально, что означает возможность распределения данных на несколько узлов и обеспечения высокой доступности и отказоустойчивости.

Поддержка транзакций: NewSQL системы поддерживают транзакции и обеспечивают целостность данных при выполнении операций записи и чтения.

Гибкость: NewSQL системы имеют возможность поддерживать различные модели данных и обеспечивать более гибкое управление данными, чем SQL-системы.

Безопасность: NewSQL системы обеспечивают более высокий уровень безопасности данных, благодаря поддержке шифрования, контролю доступа и другим механизмам.

Низкая стоимость: NewSQL системы могут быть более экономичными, чем SQL- и NoSQL-системы, благодаря возможности использования открытых и бесплатных решений.

Простой язык запросов: NewSQL системы используют простой SQL-язык запросов, что облегчает разработку приложений и ускоряет время выполнения.

Поддержка аналитики данных: NewSQL системы имеют встроенную поддержку аналитики данных, что позволяет быстро и легко анализировать большие объемы данных и получать ценную информацию для бизнеса.

Кроме того, NewSQL системы могут быть использованы в различных отраслях, таких как финансы, здравоохранение и телекоммуникации, благодаря своим высоким показателям производительности, гибкости и надежности.

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

Приведите ответ в свободной форме.

### Ответ:

При выборе СУБД и модели распределённых вычислений для обработки огромных объёмов данных на тысячах машин, необходимо учитывать ряд критериев. Один из ключевых критериев - это производительность. Она должна быть максимальной, чтобы справляться с задачами в кратчайшие сроки.

С учетом этого, рекомендуется использовать распределённую модель вычислений, которая обеспечивает максимальную производительность и масштабируемость. Например, Apache Hadoop или Apache Spark, которые поддерживают распределенные вычисления на кластерах из тысяч узлов.

Также, необходимо учитывать возможности СУБД и её совместимость с выбранной моделью распределенных вычислений. Например, Cassandra или MongoDB могут быть подходящими выборами для обработки огромного объёма данных на тысячах машин.

Ещё одним важным критерием является надёжность, что очень важно для обработки критически важных данных. Поэтому, можно рассмотреть выбор СУБД с поддержкой репликации и механизмов восстановления после сбоев, например, Oracle Database или Microsoft SQL Server.

Наконец, стоит учитывать и бюджет на реализацию проекта. Стоимость выбора и использования СУБД и модели распределённых вычислений, также может быть значимым фактором. В таком случае, можно рассмотреть бесплатные СУБД, например, PostgreSQL, и открытые модели распределённых вычислений, такие как Apache Hadoop или Apache Spark.

Таким образом, выбор конкретных технологий для обработки огромного объема данных на тысячах машин будет зависеть от ряда критериев, включая производительность, совместимость, надежность и бюджет.

---

